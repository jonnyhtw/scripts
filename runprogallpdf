#script to find out where all running suites have got to...
 
export time=$(TZ=Pacific/Auckland date)
echo $time > ~/runprogallpdf.txt 

cylc scan --sort> ./out

clear >$(tty)

echo 'looping through running workflows using...' >> ~/runprogallpdf.txt
echo '> cylc scan --sort'>> ~/runprogallpdf.txt
echo 'refreshing every '$runprogallpdfwatchinterval' s.' >> ~/runprogallpdf.txt 
echo 'here we go...'>> ~/runprogallpdf.txt

count=0

while read p 

    do 
        (( count++ ))
        echo ${count}')' >> ~/runprogallpdf.txt
        echo 'workflow name is ---> '${p%% *} >> ~/runprogallpdf.txt
        runprog ${p%% *} >> ~/runprogallpdf.txt
    done < out 

rm out

cd

convert runprogallpdf.txt runprogallpdf.ps
ps2pdf runprogallpdf.ps runprogallpdf.pdf
rm runprogallpdf.{txt,ps}
