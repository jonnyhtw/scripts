#script to find out where all running suites have got to...
 
export time=$(TZ=Pacific/Auckland date)
echo $time > ~/runprogall.txt 

cylc scan --sort --sort> out

clear >$(tty)

echo 'looping through running workflows using...' >> ~/runprogall.txt
echo '> cylc scan --sort'>> ~/runprogall.txt
echo -e 'here we go...\n'>> ~/runprogall.txt

count=0

while read p 

    do 
        (( count++ ))
        echo -e '\n'
        echo ${count}')' >> ~/runprogall.txt
        echo 'workflow name is ---> '${p%% *} >> ~/runprogall.txt
        runprog ${p%% *} >> ~/runprogall.txt
    done < out; 

rm out

cd

convert runprogall.txt runprogall.ps
ps2pdf runprogall.ps runprogall.pdf
rm runprogall.{txt,ps}
